# Massage Bot WebApp

Telegram WebApp для бота массажного салона.

## Структура

- `admin/` - Панель администратора для управления расписанием
- `client/` - Клиентское приложение для записи на массаж

## Обновление версии кеша

Чтобы предотвратить проблемы с кешированием у пользователей, используйте один из следующих способов:

### Вариант 1: Автоматический (Python скрипт)

```bash
# Запустить перед коммитом изменений в JS/CSS
python update_version.py

# Закоммитить изменения
git add .
git commit -m "chore: update cache version"
git push
```

Скрипт автоматически:
- Получает текущий git commit hash
- Обновляет версию в `admin/index.html` и `client/index.html`
- Пользователи автоматически получат новую версию без проблем с кешем

### Вариант 2: Bash скрипт (Linux/Mac/Git Bash)

```bash
chmod +x update-version.sh
./update-version.sh
git add .
git commit -m "chore: update cache version"
git push
```

### Вариант 3: Ручное обновление

Откройте `admin/index.html` и измените:

```html
<!-- Было -->
<script src="schedule.js?v=2025-11-20-06"></script>

<!-- Стало (используйте любую уникальную строку) -->
<script src="schedule.js?v=2025-11-20-07"></script>
```

## Деплой

После push в main ветку:
- Railway автоматически задеплоит изменения
- Пользователи получат новую версию при следующем открытии WebApp
- Telegram автоматически обновит кеш благодаря новому query параметру

## Разработка

### Локальная разработка

```bash
# Запуск локального сервера (например, с помощью Python)
cd admin
python -m http.server 8080

# Открыть в браузере
# http://localhost:8080
```

### Тестирование в Telegram

1. Создать тестовый бот через @BotFather
2. Настроить WebApp URL на локальный ngrok URL
3. Тестировать в Telegram

## Важные примечания

- Всегда обновляйте версию кеша перед деплоем изменений в JS/CSS файлах
- Git hook автоматически обновит версию при коммите (если настроен)
- Не забывайте тестировать изменения перед деплоем в продакшн
